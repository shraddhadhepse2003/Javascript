function guid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var _connectoEventStore={vars:{storageHandle:"_Connecto",maxEvents:1e3,sliceBy:10,maxSize:2e5},getHtmlStorage:function(n){if(this.vars.localStore)return this.vars.localStore;var e=n.getItem(this.vars.storageHandle);if(e)try{return JSON.parse(e)}catch(e){return n.removeItem(this.vars.storageHandle),this.initHtmlStorage(n)}return null},initHtmlStorage:function(e){var n;return e.getItem(this.vars.storageHandle)?this.getHtmlStorage(e):(n={source:document.referrer,landing_page:document.URL,firstVisitOn:new Date,events:[],identity:{}},e.setItem(this.vars.storageHandle,JSON.stringify(n)),n)},initPersistentStorage:function(){return this.initHtmlStorage(localStorage)},saveHtmlStorage:function(n,t){try{n.setItem(this.vars.storageHandle,JSON.stringify(t))}catch(e){JSON.stringify(t).length>this.vars.maxSize&&t.events.length>this.vars.sliceBy&&(t.events=t.events.slice(this.vars.sliceBy),this.saveHtmlStorage(n,t)),console.log(e)}},savePersistentStorage:function(){this.saveHtmlStorage(localStorage,this.vars.localStore)},prunePayload:function(e){try{var n=JSON.parse(JSON.stringify(e));return delete n.messageId,delete n.userId,delete n.anonymousId,delete n.writeKey,delete n.channel,delete n.sentAt,n.context&&(n.context.url=n.context.url.replace(/^.*\/\/[^\/]+/,""),delete n.context.library),n}catch(e){return null}},addEvent:function(e,n){e.events||(e.events=[]),e.events.push(this.prunePayload(n)),e.events.length>this.vars.maxEvents&&(e.events=e.events.slice(this.vars.sliceBy))},saveEvent:function(e){this.vars.localStore||this.init(),this.addEvent(this.vars.localStore,e),this.savePersistentStorage()},setValue:function(e,n,t){e[n]=t},saveValue:function(e,n){this.vars.localStore||this.init(),this.setValue(this.vars.localStore,e,n),this.savePersistentStorage()},getFromHtmlStorage:function(e){var n=this.getHtmlStorage(localStorage);return n&&n[e]?n[e]:null},init:function(){this.vars.localStore=this.initHtmlStorage(localStorage)}},_connecto=_connecto||[],objAgent=(_connecto.HTML5_PERMISSION_KEY="html5PermissionStatus",_connecto.askedForHtml5Permission=!1,_connecto.trackedHtml5Response=!1,_connecto.closeAfterSubscription=!1,navigator.userAgent),objbrowserName=navigator.appName,objfullVersion=""+parseFloat(navigator.appVersion),objBrMajorVersion=parseInt(navigator.appVersion,10),objOffsetVersion,haveAlreadyAskedOnce,_connecto=(-1!=(objOffsetVersion=objAgent.indexOf("Chrome"))&&(objbrowserName="Chrome",objfullVersion=objAgent.substring(objOffsetVersion+7)),objBrMajorVersion=parseInt(""+objfullVersion,10),isNaN(objBrMajorVersion)&&(objfullVersion=""+parseFloat(navigator.appVersion),objBrMajorVersion=parseInt(navigator.appVersion,10)),!window.Notification||"denied"!==Notification.permission&&"granted"!==Notification.permission||(_connecto.trackedHtml5Response=!0),_connecto.onPushSubscription=function(e,n){var t,o,i=e.endpoint;e.subscriptionId&&e.endpoint&&-1===e.endpoint.indexOf(e.subscriptionId)&&(i=e),_connecto.getFromConnectoStorage("pushSubscriptionEndpoint")!=i&&(t=_connecto.getAnonymousId(),o=(o=_connecto.getFromConnectoStorage("userId"))||t,_connecto.getUrlForUserAction(2),_connecto.identify(o,{$chromePushDetails:JSON.stringify(e)},null,function(){var e;_connecto.saveToConnectoStorage("pushSubscriptionEndpoint",i),_connecto.trackedHtml5Response||(_connecto.trackedHtml5Response=!0,_connecto.pushChomePermissionEventToCassandra(2)),_connecto.closeAfterSubscription&&window.close(),null===_connecto.getFromConnectoStorage(_connecto.HTML5_PERMISSION_KEY)&&(e={status:Notification.permission,time:new Date},_connecto.saveToConnectoStorage(_connecto.HTML5_PERMISSION_KEY,e),_connecto.setValueInCookie(_connecto.HTML5_PERMISSION_KEY,JSON.stringify(e)),null!==n)&&n()}))},_connecto.subscribeDevice=function(e,t,o){navigator.serviceWorker.ready.then(function(e){"default"!==Notification.permission||_connecto.askedForHtml5Permission||(_connecto.askedForHtml5Permission=!0,sessionStorage.getItem("haveShownOptInDialog"))||(_connecto.getUrlForUserAction(1),_connecto.pushChomePermissionEventToCassandra(1),sessionStorage.setItem("haveShownOptInDialog",!0));var n={userVisibleOnly:!0};_connecto.VAPIDDetails&&_connecto.VAPIDDetails.publickey&&(n.applicationServerKey=_connecto.urlB64ToUint8Array(_connecto.VAPIDDetails.publickey)),e.pushManager.subscribe(n).then(function(e){_connecto.onPushSubscription(e,t)}).catch(function(e){console.log("Error while subscribing: "+e),"denied"!==Notification.permission||_connecto.trackedHtml5Response||(_connecto.getUrlForUserAction(3),_connecto.trackedHtml5Response=!0,_connecto.pushChomePermissionEventToCassandra(3)),null===_connecto.getFromConnectoStorage(_connecto.HTML5_PERMISSION_KEY)&&(e={status:Notification.permission,time:new Date},_connecto.saveToConnectoStorage(_connecto.HTML5_PERMISSION_KEY,e),_connecto.setValueInCookie(_connecto.HTML5_PERMISSION_KEY,JSON.stringify(e)),null!==o)&&o()})})},_connecto.pushForChrome=function(e,n,t){navigator.serviceWorker.register("/serviceworker.js").then(function(){_connecto.subscribeDevice(e,n,t)}).catch(function(e){console.log(e)})},_connecto.urlB64ToUint8Array=function(e){for(var e=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(e),t=new Uint8Array(n.length),o=0;o<n.length;++o)t[o]=n.charCodeAt(o);return t},_connecto.isPushSupported=function(){return navigator&&navigator.serviceWorker?window.Notification?!!(window.PushManager||navigator&&navigator.push)||(console.log("Pushmanager not found."),!1):(console.log("window.Notification not found."),!1):(console.log("Service Workers not supported on this browser. Please upgrade to Chrome 50+"),!1)},_connecto.initPushRegistration=function(e,n,t,o){e&&(_connecto.closeAfterSubscription=!0),_connecto.isPushSupported()&&"Chrome"==objbrowserName&&50<=objBrMajorVersion?_connecto.pushForChrome(e,t,o):null!==n&&n()},_connecto.initWorkerRegistration=function(){function n(){self.worker&&(self.worker.isInActive=!0)}try{window.initWorker||(window.Worker?(window.workerCB={},void 0===self.worker&&(self.worker=new Worker(_connecto.webWorkerUrl)),self.worker.onmessage=function(e){"function"==typeof window.workerCB[e.data.type]&&window.workerCB[e.data.type](e.data)},self.worker.onerror=function(e){n(),console.error("Error occurred in loading connecto worker: ",e)}):console.log("Your browser doesn't support web workers."))}catch(e){n(),console.error("Exception occurred in initializing web worker, reason is: ",e)}},_connecto.setSessionDetailsForAsk=function(){sessionStorage.setItem("HTML5_PERMISSION_KEY","true"),_connecto.initPushRegistration()},_connecto.askPermissionViaTimeout=function(e){_connecto.isPushSupported()&&"default"===Notification.permission&&setTimeout(function(){_connecto.setSessionDetailsForAsk()},1e3*e)},_connecto.urlChanged=function(e){var n,t,o=sessionStorage.getItem("HTML5_PERMISSION_KEY");_connecto.isPushSupported()&&"default"===Notification.permission&&"true"!==o&&(o=location.href,t=_connecto.scriptParametersPerProperty.pushAskUrl,n=_connecto.scriptParametersPerProperty.pushAskTime,t=t&&t.value,o)&&t&&o.includes(t)&&(n&&n.enabled&&n.value?_connecto.askPermissionViaTimeout(n.value):_connecto.setSessionDetailsForAsk())},_connecto.addPopStateEventListener=function(){window.addEventListener("popstate",_connecto.urlChanged)},_connecto.decideAskType=function(){var e=_connecto.scriptParametersPerProperty.pushAskUrl,n=_connecto.scriptParametersPerProperty.pushAskTime;return n&&e&&n.enabled&&e.enabled||e&&e.enabled?_connecto.addPopStateEventListener():n&&n.enabled?n.value?_connecto.askPermissionViaTimeout(n.value):function(){}:void 0},_connecto.fetchScriptParams=function(){var e=_connecto.writeKey,e={context:{url:document.location.href,library:{name:"connecto.js",version:"1.0"}},properties:{writeKey:e}};fetch("https://api.connecto.io/getConnectoScriptParams",{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then(function(e){e.json().then(function(e){_connecto.scriptParametersPerProperty=e,_connecto.decideAskType()})}).catch(function(e){console.log(e)})},_connecto.isPushSupported()&&"default"===Notification.permission&&(haveAlreadyAskedOnce=sessionStorage.getItem("HTML5_PERMISSION_KEY"),"true"!==haveAlreadyAskedOnce)&&_connecto.fetchScriptParams(),_connecto.webWorkerUrl&&_connecto.initWorkerRegistration(),_connecto||[]),STR_ANONYMOUS_ID="anonymousId",STR_USER_ID="userId",setFreshConnectoIdsToLocalStorage=(_connecto.getConnectoStorage=function(){return _connectoEventStore.getHtmlStorage(localStorage)},_connecto.initConnectoStorage=function(){_connectoEventStore.init()},_connecto.saveToConnectoStorage=function(e,n){_connectoEventStore.saveValue(e,n)},_connecto.getFromConnectoStorage=function(e){return _connectoEventStore.getFromHtmlStorage(e)},_connecto.getConnectoId=function(){return _connecto.getFromConnectoStorage(STR_ANONYMOUS_ID)},_connecto.getAnonymousId=function(){return _connecto.getConnectoId()},_connecto.getCell=function(e){var n=0;if(!e)return n;for(i=0;i<e.length;i++)n=(n<<5)-n+(char=e.charCodeAt(i)),n&=n;return 1===arguments.length?Math.abs(n)%100:0},_connecto.getIdentity=function(){var e=_connecto.getFromConnectoStorage(STR_USER_ID);return e="string"==typeof e&&""!=e.trim()?e:_connecto.getConnectoId()},_connecto.getProfileId=function(){return _connecto.getFromConnectoStorage(STR_USER_ID)},_connecto.getSessionCount=function(){return _connecto.getConnectoId()?2:1},_connecto.pushChomePermissionEventToCassandra=function(e){var n,t={};switch(e){case 1:t.userAction="asked",n="Push Permission Asked";break;case 2:t.userAction="allowed",n="Push Permission Allowed";break;case 3:t.userAction="denied",n="Push Permission Denied"}_connecto.track(n,t,null,function(){})},_connecto.getUrlForUserAction=function(e){var n=_connecto.getIdentity(),t=document.location.protocol+"//push.connecto.io/chromePush/track",t=(t=(t=(t+="?writeKey="+encodeURIComponent(_connecto.writeKey))+("&actionType="+encodeURIComponent(e)))+("&profileId="+encodeURIComponent(n)))+("&domain="+encodeURIComponent(window.location.origin));fetch(t)},_connecto.getQueryStringValue=function(e){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))},_connecto.getDefaultPayload=function(e,n){for(var t=_connecto.getConnectoId(),o=_connecto.getIdentity(),n=n||new Date,i={utm_source:_connecto.getQueryStringValue("utm_source"),utm_medium:_connecto.getQueryStringValue("utm_medium"),utm_campaign:_connecto.getQueryStringValue("utm_campaign"),utm_content:_connecto.getQueryStringValue("utm_content"),utm_term:_connecto.getQueryStringValue("utm_term")},c=Object.keys(i),a=0;a<c.length;a++){var s=c[a];i[s]&&null!=i[s]||delete i[s]}return{messageId:guid(),type:e,userId:o,anonymousId:t,timestamp:n,sessioncount:_connecto.getSessionCount(),context:{url:document.location.href,utm_param:i,library:{name:"connecto.js",version:"1.0"}},writeKey:_connecto.writeKey,channel:"web"}},_connecto.ajax=function(e){var n,t=e.url,o=e.type||"POST",i=e.dataType||"text/plain",c=e.withCredentials||!0,a=e.success,s=e.data||null,r=e.headers,l=new XMLHttpRequest;for(n in l.open(o,t,!0),l.setRequestHeader("content-type",i),r)l.setRequestHeader(n,r[n]);l.withCredentials=c,l.onreadystatechange=function(){a&&4==this.readyState&&200==this.status&&a(this.responseText)},s?l.send(JSON.stringify(s)):l.send()},function(){var e=guid();_connecto.saveToConnectoStorage(STR_ANONYMOUS_ID,e),_connecto.saveToConnectoStorage(STR_USER_ID,e)}),setUserIdInLocalStorage=function(e){_connecto.saveToConnectoStorage(STR_USER_ID,e)};function htmlUnescape(e){return String(e).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function ajaxCall(e,n,t){var o=!1,i=!1;return window.XMLHttpRequest&&"withCredentials"in(o=new XMLHttpRequest)&&(i=!0),!!o&&(o.onreadystatechange=function(){t&&4==this.readyState&&200==this.status&&t(this.responseText)},n?(o.open("POST",e,!0),o.setRequestHeader&&o.setRequestHeader("Content-type","application/json")):o.open("GET",e,!0),i&&(o.withCredentials=!0),void(n?o.send(JSON.stringify(n)):o.send(null)))}function insertContent(e,n,t){var o;_TConnecto.messageContentInserted[t.id]||null==e||(t.notification.hasDynamicContent&&t.notification.segmentId&&""!==t.notification.segmentId&&t.notification.segmentEvalFunctionResult.result&&(Array.isArray(t.notification.segmentEvalFunctionResult.attrDetails)&&0<t.notification.segmentEvalFunctionResult.attrDetails.length&&Array.isArray(t.notification.segmentEvalFunctionResult.attrDetails[0].events)&&0<t.notification.segmentEvalFunctionResult.attrDetails[0].events.length&&(o=t.notification.segmentEvalFunctionResult.attrDetails[0].events[0].properties||t.notification.segmentEvalFunctionResult.attrDetails[0].events[0].data||{}),n=_TConnecto.Mustache.render(n,{dynamicContentVariables:_TConnecto.getVariables(),dataLayer:_TConnecto.dataLayer,segmentResult:o})),e&&e.contentWindow&&e.contentWindow.document&&(e.contentWindow.document.open("text/html","replace"),e.contentWindow.document.write(n),e.contentWindow.document.close(),_TConnecto.messageContentInserted[t.id]=!0))}function _getWindowHeight(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0}function _getWindowYscroll(){return window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0}function _getDocHeight(){return Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)}function getScrollPercentage(){return(_getWindowYscroll()+_getWindowHeight())/_getDocHeight()*100}function isScrollable(){return _getDocHeight()>_getWindowHeight()}function toggleOnEnterExit(e){e.notification.exitIntent.toggleOnEnterExitVar&&(document.getElementsByTagName("html")[0].addEventListener("mouseenter",function(){document.getElementById("connecto-modal-overlay-"+e.id).style.display="none",document.getElementById("connecto_"+e.id+"_bg_element").style.display="none"}),document.getElementsByTagName("html")[0].addEventListener("mouseleave",function(){document.getElementById("connecto-modal-overlay-"+e.id).style.display="block",document.getElementById("connecto_"+e.id+"_bg_element").style.display="block"}))}function showContent(n,t,e,o,i){if(0<o&&isScrollable())window.addEventListener("scroll",function(){getScrollPercentage()>o?_TConnecto.messageContentInserted[i.id]&&i.notification.hideOnScrollUp?0==_getWindowYscroll()?document.getElementById("container-notification-frame-"+i.id)&&document.getElementById("container-notification-frame-"+i.id).contentWindow.hideIfShown():document.getElementById("container-notification-frame-"+i.id)&&document.getElementById("container-notification-frame-"+i.id).contentWindow.showIfHidden():_TConnecto.segmentAndClientSideVariablesOk(i)?(insertContent(n,t,i),document.getElementById("container-notification-frame-"+i.id)&&document.getElementById("container-notification-frame-"+i.id).contentWindow.showIfHidden()):document.getElementById("container-notification-frame-"+i.id)&&document.getElementById("container-notification-frame-"+i.id).contentWindow.hideIfShown():_TConnecto.messageContentInserted[i.id]&&i.notification.hideOnScrollUp&&document.getElementById("container-notification-frame-"+i.id)&&document.getElementById("container-notification-frame-"+i.id).contentWindow.hideIfShown()},!1);else if(i.notification.exitIntent&&i.notification.exitIntent.showExitIntent)i.notification.dontShowAfter&&0<i.notification.dontShowAfter&&_TConnecto.timeouts.push(setTimeout(function(){_TConnecto.idToExitIntentObjMap[i.id]&&_TConnecto.idToExitIntentObjMap[i.id].disable&&_TConnecto.idToExitIntentObjMap[i.id].disable()},1e3*i.notification.dontShowAfter)),_TConnecto.timeouts.push(setTimeout(function(){var e=exitIntentLib(document.getElementById("container-notification-frame-"+i.id),{agressive:i.notification.exitIntent.useAgressiveMode||!1,sensitivity:i.notification.exitIntent.sensitivity||65,cookieExpire:i.notification.exitIntent.cookieExpire||0,timer:i.notification.exitIntent.timer||0,cookieDomain:i.notification.exitIntent.cookieDomain||"",id:i.id,callback:function(){_TConnecto.segmentAndClientSideVariablesOk(i)&&(insertContent(n,t,i),toggleOnEnterExit(i))}});_TConnecto.idToExitIntentObjMap[i.id]=e},e));else if(i.notification.notificationOriginSelector){var c,a=i.notification.notificationOriginSelector.split(",");for(c in a)for(var s=document.querySelectorAll(a[c].trim())||[],r=0;r<s.length;r++)s[r].addEventListener(i.notification.notificationOriginEvent,function(){_TConnecto.segmentAndClientSideVariablesOk(i)&&insertContent(n,t,i)})}else _TConnecto.timeouts.push(setTimeout(function(){_TConnecto.segmentAndClientSideVariablesOk(i)?(insertContent(n,t,i),document.getElementById("container-notification-frame-"+i.id)&&(document.getElementById("container-notification-frame-"+i.id).parentElement.style.display="block",document.getElementById("container-notification-frame-"+i.id).contentWindow.showIfHidden())):document.getElementById("container-notification-frame-"+i.id)&&(document.getElementById("container-notification-frame-"+i.id).parentElement.style.display="none",document.getElementById("container-notification-frame-"+i.id).contentWindow.hideIfShown())},e))}function _loadScript(e,n){var t=document.createElement("script");t.type="text/javascript",t.readyState?t.onreadystatechange=function(){"loaded"!=t.readyState&&"complete"!=t.readyState||(t.onreadystatechange=null,!n)||n()}:t.onload=function(){n&&n()},t.src=e,document.getElementsByTagName("head")[0].appendChild(t)}function _checkValueMatch(e,n,t){var o=!1;switch(e){case 1:0<=n.indexOf(t)&&(o=!0);break;case 2:-1===n.indexOf(t)&&(o=!0);break;case 3:n==t&&(o=!0);break;case 4:n!=t&&(o=!0);break;case 5:t<n&&(o=!0);break;case 6:n<t&&(o=!0);break;case 7:t<=n&&(o=!0);break;case 8:n<=t&&(o=!0);break;case 9:null!=n&&(o=!0);break;case 10:null==n&&(o=!0)}return o}function _processConnectoMessages(){if(_TConnecto.messages)for(var e=0;e<_TConnecto.messages.length;e++){var n,t,o,i=_TConnecto.messages[e];_TConnecto.messageProcessed[i.id]||_TConnecto.messageContentInserted[i.id]||(!i.notification.hasDynamicContent||_TConnecto.Mustache?!_TConnecto.pageLoaded&&12===i.notification.notification_type||(_TConnecto.pageLoaded&&_TConnecto.Sizzle||!i.notification.clientSideVariableMatches||!(0<i.notification.clientSideVariableMatches.length)?(t=htmlUnescape(i.snippet),_TConnecto.messageMap[i.id]=i,_TConnecto.messageProcessed[i.id]=!0,12===i.notification.notification_type?_TConnecto.embedElements[i.notification.embeddedSlot]?(n=_TConnecto.embedElements[i.notification.embeddedSlot]).innerHTML=t:_TConnecto.messageContentInserted[i.id]=!0:_TConnecto.segmentAndClientSideVariablesOk(i)&&((n=document.createElement("div")).setAttribute("id","connecto_"+i.id),n.innerHTML=t,document.body?document.body.insertBefore(n,null):(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(n,t)),5!==i.notification.closeBehaviour&&(t=document.getElementById("container-notification-frame-"+i.id),o=htmlUnescape(i.innerHTML),showContent(t,o=!i.notification.hasDynamicContent||i.notification.segmentId&&""!==i.notification.segmentId?o:_TConnecto.Mustache.render(o,{dynamicContentVariables:_TConnecto.getVariables(),dataLayer:_TConnecto.dataLayer}),i.delay,i.scroll,i))):_TConnecto._loadSizzleJS()):__co_loadMustache())}}function __co_loadMustache(){var e;"undefined"!=typeof Mustache&&(e=Mustache),"undefined"!=typeof require&&"undefined"!=typeof requirejs&&require&&requirejs?(require.config({paths:{_co_mustache:"https://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.8.1/mustache.min"}}),require(["_co_mustache"],function(e){_TConnecto.Mustache=e})):_loadScript("https://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.8.1/mustache.min.js",function(){Mustache&&(_TConnecto.Mustache=Mustache,Mustache=e,_processConnectoMessages())})}function exitIntentLib(e,n){function t(e,n){return void 0===e?n:e}function o(e){var e=24*e*60*60*1e3,n=new Date;return n.setTime(n.getTime()+e),"; expires="+n.toGMTString()}function i(e){e.clientY>g||s("viewedOnExit"+T,"true")&&!d||(S=setTimeout(r,_))}function c(e){S&&(clearTimeout(S),S=null)}function a(e){y||s("viewedOnExit"+T,"true")&&!d||e.metaKey&&76==e.keyCode&&(y=!0,S=setTimeout(r,_))}function s(e,n){return document.cookie.split("; ").reduce(function(e,n){n=n.split("=");return e[n[0]]=n[1],e},{})[e]===n}function r(){l(),f()}function l(){e&&(e.style.display="block"),u()}function u(e){void 0!==(e=e||{}).cookieExpire&&(p=o(e.cookieExpire)),!0===e.sitewide&&(h=";path=/"),void 0!==e.cookieDomain&&(C=";domain="+e.cookieDomain),document.cookie="viewedOnExit"+T+"=true"+p+C+h,v.removeEventListener("mouseleave",i),v.removeEventListener("mouseenter",c),v.removeEventListener("keydown",a)}var d=(n=n||{}).aggressive||!1,g=t(n.sensitivity,65),m=t(n.timer,1e3),_=t(n.delayExit,200),f=n.callback||function(){},p=o(n.cookieExpire)||"",C=n.cookieDomain?";domain="+n.cookieDomain:"",h=!0===n.sitewide?";path=/":"",T=n.id||"",S=null,v=document.getElementsByTagName("html")[0],y=(setTimeout(function(){v.addEventListener("mouseleave",i),v.addEventListener("mouseenter",c),v.addEventListener("keydown",a)},m),!1);return{fire:l,disable:u}}_connecto.validateProfileTraits=function(e,n,t){var o=_connecto.getIdentity();return!((t||e&&o&&e===o)&&!_connecto._checkAndUpdateProfileTraits(n,t))},_connecto._checkAndUpdateProfileTraits=function(e,n){var t=_connecto.getFromConnectoStorage("lastTraits")||{};if(n||JSON.stringify(e)!==JSON.stringify(t)){for(var o in e){var i=e[o],c=t[o];c&&c==i&&!n&&delete e[o]}return!0}return!1},_connecto.trackUserIds=function(){try{var n,e,t,o,i,c=JSON.parse(localStorage.getItem("MOE_DATA"));null!==c&&(n={},c.USER_DATA&&c.USER_DATA.attributes&&(t=0<(e=c.USER_DATA.attributes.filter(function(e){return"USER_ATTRIBUTE_UNIQUE_ID"===e.key})).length?e[0]:{}).value&&""!==t.value&&(n.moengage_user_id=t.value),o=c.HARD_ASK_STATUS,i=c.SUBSCRIPTION_DETAILS,o&&"granted"===o&&i&&i.raw&&(i.keys||i.raw.keys)&&(n.$chromePushDetails=JSON.stringify({endpoint:i.raw.endpoint,expirationTime:i.raw.expirationTime,keys:{p256dh:(i.raw.keys?i.raw:i).keys.p256dh,auth:(i.raw.keys?i.raw:i).keys.auth}})),0<Object.keys(n).length)&&_connecto.identify(_connecto.getIdentity(),n,null,function(e){e||n.$chromePushDetails&&_connecto.getUrlForUserAction(2),null===_connecto.getFromConnectoStorage(_connecto.HTML5_PERMISSION_KEY)&&(e={status:Notification.permission,time:new Date},_connecto.saveToConnectoStorage(_connecto.HTML5_PERMISSION_KEY,e),_connecto.setValueInCookie(_connecto.HTML5_PERMISSION_KEY,JSON.stringify(e)))})}catch(e){}},_connecto.identify=function(e,n,t,o){var i,c;e&&null!==e&&""!==e?!(e instanceof Function)&&(e||n&&0!==Object.keys(n).length)&&_connecto.getConnectoId()?(i=!1,t&&t.force&&!0===t.force&&(i=!0),_connecto.validateProfileTraits(e,n,i)&&0!==Object.keys(n).length?(e&&setUserIdInLocalStorage(e),(i=_connecto.getDefaultPayload("identify",new Date)).traits=n,t&&t.url&&(i.context.url=t.url),c=document.location.protocol+"//api.connecto.io/identify",_connecto._sendAndProcessResponse(c,i,o,_connecto.cbToSetAnonymousId)):o&&o(!0)):o&&o():setTimeout(function(){e=_connecto.getIdentity(),_connecto.identify(e,n,t,o)},1e3)},_connecto.setIdentifyCookie=function(e){var n,t,o;n="identifyCookie",e=e.identifyCookie,t=3650,(o=new Date).setTime(o.getTime()+24*t*60*60*1e3),t="expires="+o.toUTCString(),document.cookie=n+"="+e+"; "+t+"; path=/; sameSite=None; secure=true;"},_connecto.saveTraitsToLocalStorage=function(e){for(var n=_connecto.getFromConnectoStorage("lastTraits")||{},t=Object.keys(e),o=0;o<t.length;o++){var i=t[o];n[i]=e[i]}_connecto.saveToConnectoStorage("lastTraits",n)},_connecto._sendAndProcessResponse=function(e,n,t,o){function i(e){res=JSON.parse(e),"identify"===n.type&&(e=n.traits,_connecto.saveTraitsToLocalStorage(e)),o&&o(res),t&&t(),res.identifyCookie&&_connecto.setIdentifyCookie(res)}n.sentAt=new Date,window.initWorker&&window.workerCB?(window.initWorker({url:e,dict:n,type:"connecto_post"}),window.workerCB.connecto_post=function(e){i(e.data)}):"object"==typeof self.worker&&!self.worker.isInActive&&_connecto.webWorkerUrl?(self.worker.postMessage({url:e,dict:n,type:"connecto_post"}),window.workerCB.connecto_post=function(e){i(e.data)}):_connecto.ajax({url:e,data:n,success:i}),_connectoEventStore.saveEvent(n)},_connecto.setValueInCookie=function(e,n){var t,o;e=e,n=n,t=3650,(o=new Date).setTime(o.getTime()+24*t*60*60*1e3),t="expires="+o.toUTCString(),document.cookie="_CO_"+e+"="+escape(n)+"; "+t+"; sameSite=None; secure=true;"},_connecto.cbToSetAnonymousId=function(e){e.anonymousId&&((e=e.anonymousId)!==_connecto.getConnectoId()&&_connecto.saveToConnectoStorage(STR_ANONYMOUS_ID,e),_connecto.setValueInCookie("type","connecto"),_connecto.setValueInCookie(STR_ANONYMOUS_ID,e))},_connecto.page=function(e,n,t){var o;_connecto.getConnectoId()?(o=_connecto.getDefaultPayload("page",new Date),e&&(o.data=e),n&&n.url&&(o.context.url=n.url),e=document.location.protocol+"//api.connecto.io/page",_connecto._sendAndProcessResponse(e,o,t,_connecto.cbToSetAnonymousId)):t&&t()},_connecto.track=function(e,n,t,o){var i;_connecto.getConnectoId()?((i=_connecto.getDefaultPayload("track",new Date)).event=e,i.properties=n,-1!==e.indexOf("Push Permission")&&i&&i.context&&i.context.library&&(i.context.library.name="connecto-backend"),t&&t.url&&(i.context.url=t.url),n=document.location.protocol+"//api.connecto.io/track",_connecto._sendAndProcessResponse(n,i,o,_connecto.cbToSetAnonymousId)):o&&o()},_connecto.generatedEvents=function(e,n,t,o){var i;_connecto.getConnectoId()?((i=_connecto.getDefaultPayload("track",new Date)).event=e,i.properties=n,-1!==e.indexOf("Push Permission")&&i&&i.context&&i.context.library&&(i.context.library.name="connecto-backend"),t&&t.url&&(i.context.url=t.url),n=document.location.protocol+"//api.connecto.io/generatedEvents",_connecto._sendAndProcessResponse(n,i,o,_connecto.cbToSetAnonymousId)):o&&o()},_connecto.transaction=function(e,n,t,o){var i;_connecto.getConnectoId()?((i=_connecto.getDefaultPayload("transaction",new Date)).event=e,i.properties=n,t&&t.url&&(i.context.url=t.url),e=document.location.protocol+"//api.connecto.io/transaction",_connecto._sendAndProcessResponse(e,i,o,_connecto.cbToSetAnonymousId)):o&&o()},_connecto.onload=function(e){e&&e()},_connecto.processOnLoad=function(){for(var e=_connecto.length,n=0;n<e;n++)_connecto._processPushedFunction(_connecto.shift())},_connecto._processPushedFunction=function(e){var n=e.shift();_connecto[n]&&_connecto[n].apply(null,e)},_connecto.push=function(e){_connecto._processPushedFunction(e)},function(){if(_connecto.initialized)return window.console&&console.error&&console.error("Connecto Snippet Included Twice");_connecto.initialized=!0,_connecto.initConnectoStorage();var e=_connecto.getAnonymousId(),n=_connecto.getProfileId();e?n||setUserIdInLocalStorage(e):setFreshConnectoIdsToLocalStorage(),_connecto.processOnLoad()}();var _TConnecto=_TConnecto||{},fetchMessages=(_TConnecto.initPage=function(e){if(_TConnecto.clearMessages(),_TConnecto.initialized=!1,_TConnecto.pageLoaded=_TConnecto.pageLoaded||!1,_TConnecto.variables=_TConnecto.variables||{},_TConnecto.messages=null,_TConnecto.messageContentInserted={},_TConnecto.messageProcessed={},_TConnecto.embedElements={},_TConnecto.messageMap={},_TConnecto.usesNewVariables=!1,_TConnecto.idToExitIntentObjMap)for(var n in _TConnecto.idToExitIntentObjMap)_TConnecto.idToExitIntentObjMap[n]&&_TConnecto.idToExitIntentObjMap[n].disable&&_TConnecto.idToExitIntentObjMap[n].disable();if(_TConnecto.idToExitIntentObjMap={},_TConnecto.timeouts&&0<_TConnecto.timeouts.length)for(var t=0;t<_TConnecto.timeouts.length;t++)clearTimeout(_TConnecto.timeouts[t]);_TConnecto.timeouts=[],e&&fetchMessages(),_TConnecto.setUtmParamsInSessionStorage()},_TConnecto.setUtmParamsInSessionStorage=function(){try{var e,n=document.referrer,t=window.location.toString(),o=t.split("?"),i=new Set(["utm_source","utm_medium","utm_content","utm_campaign","utm_term"]),c=!1;if(1<o.length){var a,s=o[1].split("&");for(a in s){var r=s[a].split("="),l=r[0],u=r[1];i.has(l)&&(sessionStorage.setItem(l,decodeURIComponent(u)),c=!0)}}!n||c||null!=sessionStorage.getItem("utm_source")&&null!=sessionStorage.getItem("utm_medium")?c||!t.includes("gclid")||null!=sessionStorage.getItem("utm_source")&&null!=sessionStorage.getItem("utm_medium")?n||c||null!=sessionStorage.getItem("utm_source")&&null!=sessionStorage.getItem("utm_medium")||(sessionStorage.setItem("utm_source","direct"),sessionStorage.setItem("utm_medium","none")):(sessionStorage.setItem("utm_source","google"),sessionStorage.setItem("utm_medium","cpc")):(e=new URL(n).hostname.replace("www.",""),n.includes("facebook")||n.includes("youtube")||n.includes("twitter")||n.includes("linkedin")||n.includes("plus.google")||n.includes("pinterest")||n.includes("instagram")?(sessionStorage.setItem("utm_source",e),sessionStorage.setItem("utm_medium","social")):n.includes("google")||n.includes("yahoo")||n.includes("bing")||n.includes("ask")||n.includes("msn")?(sessionStorage.setItem("utm_source",e),sessionStorage.setItem("utm_medium","organic")):(n.includes("aclk")||n.includes("googleads.g.doubleclick.net"))&&(sessionStorage.setItem("utm_source","google"),sessionStorage.setItem("utm_medium","cpc")))}catch(e){console.error("Exception occurred in storing UTM params to session storage",e)}},function(){_TConnecto.dataLayer=_TConnecto.dataLayer||window.dataLayer;var e=_TConnecto.getFromConnectoStorage("firstVisitOn"),n=_TConnecto.getFromConnectoStorage("landingPage"),t={};try{_TConnecto.updateConnectoLogs();var o=_TConnecto.initConnectoStorage().source,i=_TConnecto.getConnectoLogs(),c=_TConnecto.getEventsSummary(),a=1,s=1,r=null,l=(i&&i.sessions&&0<(a=i.sessions.length)&&(s=i.sessions[a-1].pagesViewed,r=i.sessions[a-1].startTime),e&&(t.firstVisitTime=e),c&&(t.eventsSummary=c),n&&(t.landingPage=n),o&&(t.referer=o),a&&(t.sessionNum=a),s&&(t.sessionLen=s),r&&(t.sessionStart=r),_TConnecto.engageId&&(t.engageId=_TConnecto.engageId),_TConnecto.getVariables()&&(t.customVariables=JSON.stringify(_TConnecto.getVariables())),_TConnecto.licenseKey&&(t.licenseKey=_TConnecto.licenseKey),_TConnecto.getAnonymousId()),u=_TConnecto.getIdentity(),d={};u&&(d.userId=u),l&&(d.anonymousId=l),d&&(t.segmentData=JSON.stringify(d)),_TConnecto.saveToConnectoStorage("lastVisitTime",new Date)}catch(e){console.log("Error : err"+e),console.log("Error : stack"+e.stack)}ajaxCall(document.location.protocol+"//server.connecto.io/?v=1.2&url="+encodeURIComponent(window.location),t,function(e){if("1"==(res=JSON.parse(e)).response||"2"==res.response){for(var n=0;n<res.messages.length;n++){var t=res.messages[n];if(t.imagesToPreload)for(var o=0;o<t.imagesToPreload.length;o++)document.images&&t.imagesToPreload[o]&&((new Image).src=t.imagesToPreload[o])}_TConnecto.messages=res.messages,res.groups&&(_TConnecto.groups=res.groups),"interactive"==document.readyState||"complete"==document.readyState?_TConnecto._processOnPageLoad():window.addEventListener("DOMContentLoaded",_TConnecto._processOnPageLoad)}})});_TConnecto.trackConversion=function(e){(e=e||window._connecto_cur_msg_id)&&(ajaxCall(document.location.protocol+"//server.connecto.io/action?action=8&id="+e),_TConnecto.resetMessageId())},_TConnecto.resetMessageId=function(){delete window._connecto_cur_msg_id},_TConnecto.clearMessages=function(){if("object"==typeof _TConnecto.messageContentInserted)for(var e in _TConnecto.messageContentInserted){e=document.getElementById("connecto_"+e);e&&e.remove()}},_TConnecto.initPage(),_TConnecto.addVariable=function(e,n){_TConnecto.usesNewVariables=!0,e&&n&&(_TConnecto.variables[e]=n)},_TConnecto.getVariables=function(){if(!_TConnecto.usesNewVariables&&(_TConnecto.customVariables&&(_TConnecto.variables=_TConnecto.customVariables),_TConnecto.dynamicVariables))for(var e in _TConnecto.dynamicVariables)_TConnecto.variables[e]=_TConnecto.dynamicVariables[e];return _TConnecto.variables},_TConnecto.segmentAndClientSideVariablesOk=function(e){var n=e.notification.segmentId;return _TConnecto._evaluateSegmentEvalFn(e.notification),!(n&&""!==n&&!e.notification.segmentEvalFunctionResult.result||e.notification.clientSideVariableMatches&&0<e.notification.clientSideVariableMatches.length&&!_TConnecto.matchClientSideVariables(e.notification.clientSideVariableMatches,e.notification))},_TConnecto.matchClientSideVariables=function(andClauses,notification){for(var conjunction=!0,i=0;i<andClauses.length;i++){for(var disjunction=!1,orClauses=andClauses[i].orClauses,j=0;j<orClauses.length;j++){var clauseType=orClauses[j].clauseType,selector=orClauses[j].selector,dataLayerVariable="_TConnecto.dataLayer"+orClauses[j].dataLayerVariable,matchType=orClauses[j].matchType,value=orClauses[j].value,clauseMatch=!1;if(1==clauseType&&selector&&matchType&&value){var selectorElements=_TConnecto.Sizzle(selector),selectorValue,selectorValue,value;selectorElements&&0<selectorElements.length&&(selectorValue=selectorElements[0].textContent,selectorValue=selectorValue.toUpperCase(),value=value.toUpperCase(),_checkValueMatch(matchType,selectorValue,value))&&(clauseMatch=!0)}else if(2==clauseType&&_TConnecto.dataLayer&&dataLayerVariable&&matchType)try{var evaluatedDataLayerValue=eval(dataLayerVariable);evaluatedDataLayerValue=evaluatedDataLayerValue.toUpperCase(),value=value.toUpperCase(),_checkValueMatch(matchType,evaluatedDataLayerValue,value)&&(clauseMatch=!0)}catch(e){}else if(3==clauseType&&value)clauseMatch=eval("("+orClauses[j].value+")()");else if(4==clauseType&&_TConnecto.dataLayer&&dataLayerVariable&&matchType)try{var evaluatedDataLayerValue=eval(dataLayerVariable),segmentEvalFunctionResults=(evaluatedDataLayerValue=evaluatedDataLayerValue.toUpperCase(),[]);if(notification.segmentEvalFunctionResult&&notification.segmentEvalFunctionResult.attrDetails)for(var index in notification.segmentEvalFunctionResult.attrDetails){var attrDetail=notification.segmentEvalFunctionResult.attrDetails[index];segmentEvalFunctionResults.push(attrDetail.joinAttrVal.toUpperCase())}1!=matchType&&2!=matchType||!_checkValueMatch(matchType,segmentEvalFunctionResults,evaluatedDataLayerValue)||(clauseMatch=!0)}catch(e){}disjunction=disjunction||clauseMatch}conjunction=conjunction&&disjunction}return conjunction},_TConnecto._loadSizzleJS=function(){var e;"undefined"!=typeof Sizzle&&(e=Sizzle),"undefined"!=typeof require&&"undefined"!=typeof requirejs&&require&&requirejs?(require.config({paths:{_co_sizzle:"https://cdnjs.cloudflare.com/ajax/libs/sizzle/2.2.0/sizzle.min"}}),require(["_co_sizzle"],function(e){_TConnecto.Sizzle=e})):_loadScript("https://cdnjs.cloudflare.com/ajax/libs/sizzle/2.2.0/sizzle.min.js",function(){Sizzle&&(_TConnecto.Sizzle=Sizzle,Sizzle=e,_processConnectoMessages())})},_TConnecto.getMessage=function(e){return _TConnecto.messageMap[e]?_TConnecto.messageMap[e].notification:null},_TConnecto.showMessage=function(e){_TConnecto.messageMap[e]&&(_TConnecto.messageContentInserted[e]?document.getElementById("container-notification-frame-"+e).contentWindow.toggleWidget():(e=_TConnecto.messageMap[e],showContent(document.getElementById("container-notification-frame-"+e.id),htmlUnescape(e.innerHTML),e.delay,e.scroll,e)))},_TConnecto.stopMessage=function(e){_TConnecto.messageContentInserted[e]=!0},_TConnecto.getConnectoStorage=function(e){e=localStorage.getItem(e);if(e)try{return JSON.parse(e)}catch(e){return{}}return null},_TConnecto.initConnectoStorage=function(){var e;return localStorage.getItem("_connecto")?_TConnecto.getConnectoStorage("_connecto"):(e={source:document.referrer,landingPage:document.URL,firstVisitOn:new Date},localStorage.setItem("_connecto",JSON.stringify(e)),e)},_TConnecto.saveToConnectoStorage=function(e,n){var t=_TConnecto.getConnectoStorage("_connecto");(t=t||_TConnecto.initConnectoStorage())[e]=n,localStorage.setItem("_connecto",JSON.stringify(t))},_TConnecto.connectoLogsUpdated=!1,_TConnecto.updateConnectoLogs=function(){var e,n,t;_TConnecto.connectoLogsUpdated||(e=_TConnecto.getConnectoLogs(),n=new Date,e.pages.push({url:window.location.href,time:n}),0<e.sessions.length&&_TConnecto._readCookie("_co_session_active")?((t=e.sessions[e.sessions.length-1]).pagesViewed=t.pagesViewed?t.pagesViewed+1:1,t.lastPageLoadTime=n):e.sessions.push({startTime:n.getTime(),pagesViewed:1}),(t=new Date).setTime(n.getTime()+144e5),document.cookie="_co_session_active=1;expires="+t.toGMTString()+"; path=/",100<e.pages.length&&e.pages.shift(),50<e.sessions.length&&e.sessions.shift(),localStorage.setItem("_connecto_logs",JSON.stringify(e)),_TConnecto.connectoLogsUpdated=!0)},_TConnecto.getConnectoLogs=function(){var e={pages:[],sessions:[]},n=e,t=localStorage.getItem("_connecto_logs");if(t)try{n=JSON.parse(t)}catch(e){console.log("Error1 : err"+e),console.log("Error1 : stack"+e.stack)}return(n=n||e).pages&&"[object Array]"===Object.prototype.toString.call(n.pages)||(n.pages=[]),n.sessions&&"[object Array]"===Object.prototype.toString.call(n.sessions)||(n.sessions=[]),n},_TConnecto.getEventsSummary=function(){var e=localStorage.getItem("_co_events");if(e)try{return(connectoEvents=JSON.parse(e)).summary}catch(e){console.log("Error1 : err"+e),console.log("Error1 : stack"+e.stack)}return null},_TConnecto._readCookie=function(e){for(var n=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var i=t[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n))return i.substring(n.length,i.length)}return null},_TConnecto.getIdentity=function(){return _TConnecto.getFromConnectoEventStorage("userId")||_TConnecto.getAnonymousId()},_TConnecto.getAnonymousId=function(){return _TConnecto.getFromConnectoEventStorage("anonymousId")},_TConnecto.getFromConnectoEventStorage=function(e){var n=_TConnecto.getConnectoStorage("_Connecto");return n&&n[e]?n[e]:null},_TConnecto.getFromConnectoStorage=function(e){var n=_TConnecto.getConnectoStorage("_connecto");return n&&n[e]?n[e]:null},_TConnecto.updateState=function(id,state,data){var msg,msg="string"==typeof id?_TConnecto.getMessage(id):id;if(msg&&msg.triggerNotifications&&msg.triggerNotifications.callbackClick&&1==state&&eval("("+msg.triggerNotifications.callbackClick+")("+JSON.stringify(data)+")"),msg&&msg.triggerNotifications&&msg.triggerNotifications.callbackClose&&0==state&&eval("("+msg.triggerNotifications.callbackClose+")()"),_TConnecto.groups)for(var i=0;i<_TConnecto.groups.length;i++){var group=_TConnecto.groups[i];if(group.dontShowAfterFill&&1==state||group.dontShowAfterClose&&0==state)for(var j=0;j<_TConnecto.messages.length;j++){var message=_TConnecto.messages[j];_TConnecto.messageContentInserted[message.id]=!0}}},_TConnecto._processOnPageLoad=function(){_TConnecto.pageLoaded=!0;for(var e=document.getElementsByTagName("ins"),n=0;n<e.length;n++){var t=e[n].getAttribute("class");t&&-1<t.indexOf("connecto-notification")&&(t=e[n].getAttribute("data-connecto-slot"))&&(_TConnecto.embedElements[t]=e[n])}_processConnectoMessages()},_TConnecto._evaluateSegmentEvalFn=function(notification){if(notification.segmentId&&""!==notification.segmentId)try{notification.segmentEvalFunctionResult=eval(notification.segmentEvalFunction)}catch(err){console.log("It shoudn't have happened, check the evalFn of notificationId: "+notification._id),notification.segmentEvalFunctionResult={result:!1}}},_TConnecto.initialized||(_TConnecto.initialized=!0,"function"==typeof _TConnecto.initConnecto&&_TConnecto.initConnecto(),fetchMessages());